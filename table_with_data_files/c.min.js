function PrintWindow(e){window.open(e,"","left=50,top=50,width=728,height=640,toolbar=0,scrollbars=1,status=0")}function getCalcCookie(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function setCalcCookie(e,t,s){var i=(s=s||{expires:30,path:"/"}).expires;if("number"==typeof i&&i){var o=new Date;o.setTime(o.getTime()+1e3*i*86400),i=s.expires=o}i&&i.toUTCString&&(s.expires=i.toUTCString());var n=e+"="+(t=encodeURIComponent(t));for(var a in s){n+="; "+a;var r=s[a];!0!==r&&(n+="="+r)}document.cookie=n}function getGUID(){var e=getCalcCookie("guid");return void 0===e&&(e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),setCalcCookie("guid",e),e}function copyContainerShow(){$(".copy_conteiner").show(),"undefined"!=typeof mobile&&$("html, body").animate({scrollTop:$("div.save_link").offset().top-100},1e3)}function hideCopyContainerAjax(){$("#copy_conteiner_ajax").hide()}function stCB(){setTimeout("hideCopyContainerAjax()",1e3),stLight.options({publisher:"3ebe3d7e-d5c8-4df6-a1fc-037bd024c3b6"})}function initShare(){var e=$(".save_link").data("link");"ru"==location.host.substr(-2)?new Ya.share({element:"ya_share1",elementStyle:{type:"link",border:!0,quickServices:[]},link:"https://"+location.host+e,image:"https://"+location.host+"/imgs2/logo.png",popupStyle:{vDirection:"down",blocks:{" ":["vkontakte","facebook","twitter","odnoklassniki","moimir","lj","moikrug","gplus"]}},onready:function(e){},onclose:function(e){$(".copy_conteiner").hide(),$("#copy_button").html("Копировать ссылку")}}):($("div.save_link").click(function(){stLightBool||(stLightBool=!0,function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://ws.sharethis.com/button/buttons.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t),e.onload=stCB,e.onreadystatechange=function(){"loaded"==e.readyState&&stCB()}}()),setTimeout("copyContainerShow()",100)}),$(document).click(function(){$(".copy_conteiner").hide()})),new Clipboard("#copy_button").on("success",function(e){"www.calc.ru"!=location.host?$("#copy_button").text("Ссылка скопирована"):"undefined"!=typeof mobile?$("#share_text").text("Ссылка скопирована"):$("#share_text").val("Ссылка скопирована")}),$(".b-share__handle").live("mouseup",function(){$(".copy_conteiner").show(),"undefined"!=typeof mobile&&$("html, body").animate({scrollTop:$("div.save_link").offset().top-100},1e3)}),$(".b-share__handle").live({mouseenter:function(){$("#share_text").css("color","#ffb931"),$("span.save").addClass("saveh")},mouseleave:function(){$("#share_text").css("color","#ff9a00"),$("span.save").removeClass("saveh")}})}function compareWords(e,t){t=$.trim(t).toLowerCase();var s=e.length<t.length?e.length:t.length,i=0;if(s){for(var o=0;s>o;o++)e[o]==t[o]&&i++;return(i/=s)>.65}return!1}function hideSuggest(){$("div.suggest div").hide()}function showSuggest(){var e="",t=!1,s=0;for(var i in arSuggest)if(0!=arSuggest[i]){t=!0;var o=arSuggest[i],n=[];switch(o[1]){case"s21":n=["Калькуляторы","kalkulyatory.html"];break;case"s11":n=["Видеоуроки","videouroki.html"];break;default:n=["Справочник","spravochnik.html"]}s++,"undefined"!=typeof mobile?7>s&&(e+=(s>1?"<hr>":"")+'<a title="'+o[0]+'" href="/'+i+'"><table class="sugg" id="sugg'+s+'" cellpading="0" cellspacing="0" width="100%"><tr><td class="l" align="left">'+o[0]+'</td><td class="r" align="right">&nbsp;</td></tr></table></a>'):e+='<a title="'+o[0]+'" href="/'+i+'"><table class="sugg" id="sugg'+s+'" cellpading="0" cellspacing="0" width="100%"><tr><td class="l" align="left">'+o[0]+'</td><td class="r" align="right">'+n[0]+"</td></tr></table></a>"}o='Искать на сайте: "'+$("#wh").val()+'"',s++,"undefined"!=typeof mobile?e+=(s>2?"<hr>":"")+'<a title="'+o+'" href="/search.php?searchid=2220568&text='+encodeURI($("#wh").val())+'&web=0"><table class="sugg" id="sugg'+s+'" cellpading="0" cellspacing="0" width="100%"><tr><td class="l" align="left">'+o+'</td><td class="r" align="right">&nbsp;</td></tr></table></a>':e+='<a title="'+o+'" href="/search.php?searchid=2220568&text='+encodeURI($("#wh").val())+'&web=0"><table class="sugg" id="sugg'+s+'" cellpading="0" cellspacing="0" width="100%"><tr><td class="l" align="left">'+o+'</td><td class="r" align="right">&nbsp;</td></tr></table></a>',suggest_sch&&$.trim($("#"+sel).val())&&(e+='<center><img src="/imgs/search-ajax-loader.gif"></center>'),$("#"+sel+"_suggest div.suggesti").html(e),e?(t&&(suggest_i=0,$("#"+sel+"_suggest a table").mouseover(function(){suggest_i=$(this).attr("id").substr(4),$("#"+sel+"_suggest a table").each(function(){$(this).find("td").css("background-color","#ffffff"),$(this).find("td.l").css("color","#000000"),$(this).find("td.r").css("color","silver")}),$(this).find("td").css("background-color","#6e99d4"),$(this).find("td").css("color","#ffffff")})),"undefined"==typeof mobile&&$("#"+sel+"_suggest div.suggesti").width($("#"+sel).width()+25),$("#"+sel+"_suggest div").show()):hideSuggest()}function checkSuggest(){if(suggest_sch)suggest_sch--;else{var e=$.trim($("#"+sel).val());e!=suggest_q&&((suggest_q=e).length>=2||$.inArray(suggest_q,specialSuggestSymbols)>=0?$.post(lang_prefix+"/include/suggest_aj.php",{q:e},function(e){if(e){arSuggest={},e=e.split("%%");for(var t in e)if(e[t]){var s=e[t].split("##",3);arSuggest[s[1]]=[s[2],s[0]]}}showSuggest()}):hideSuggest())}}var stLightBool=!1,arSuggest={},sel="wh",suggest_sch=0,suggest_q="",suggest_i=0,specialSuggestSymbols=["$","^"],r=/^\/[a-z][a-z]\/$/,lang_prefix=r.test(window.location.pathname.substr(0,4))?window.location.pathname.substr(0,3):"";$(function(){($("#version_switch").attr("href","/switch.php?width="+screen.width),$(".tooltips, .hint").click(function(){}),$("div.list_items div").click(function(){window.location.href=$(this).find("a").first().attr("href")}),$(".action_table").click(function(){if($(this).hasClass("default_table")&&($("table.action_table").each(function(){$(this).removeClass("focused_table")}),$(this).addClass("focused_table")),!$(this).hasClass("no_action")){var e=$(this).find("a").first();$(this).find("td.slideup").length>0?($(this).find("tr").last().hide(),$(this).css("border","none"),$(this).find("td.slideup").removeClass("slideup")):$(this).find("td.slidedown").length>0?($(this).find("tr").last().show(),$(this).css("border","1px solid silver"),$(this).find("td.slidedown").addClass("slideup")):window.location.href=e.attr("href")}}),$(".refresh").click(function(){return $("div.refresh").addClass("refresh_"),$.post("/js/check.php",{service:"ipoteka",dt:$(".dop_info a.refresh").text()},function(e){$("div.refresh").removeClass("refresh_"),$(".dop_info a.refresh").text(e)}),!1}),$(".add_to_fav, .added_to_fav").click(function(){var e=$(".add_to_fav").data("link");if(void 0!==e){var t=getCalcCookie("fav");void 0===t?(t=[]).push(e):t.indexOf(e)>=0?t=(t=t.replace(e,"")).split("#"):(t=t.split("#")).push(e);var s=[];for(var i in t)t[i]&&s.push(t[i]);s.length>0?setCalcCookie("fav",s.join("#")):setCalcCookie("fav","",{expires:-1,path:"/"}),$(this).hide(),$(this).hasClass("added_to_fav")?($(".add_to_fav").show(),$.post("/include/stat.php",{h:e})):($(".added_to_fav").show(),$.post("/include/stat.php",{h:e,add:1}))}}),$(".save_link").length>0&&initShare(),"undefined"!=typeof mobile?($("div.menu_items div.search").click(function(){$("div.block_search").slideDown(),$("#wh").focus()}),$("div.menu_items div.menu").click(function(){$("div.block_btns").slideDown()}),$("div.block_btns input").click(function(){$("div.block_btns").slideUp()}),$(".hint").hover(function(){var e=$(this).find("div.tooltips span").first();1!==e.data("showed")&&("undefined"==typeof mobile&&e.css("margin-left",-e.offset().left-145),e.data("showed",1))},function(){}),$("h1").height()<25&&$("h1").css("line-height","25px")):$("#share_block").length>0&&$("div.top_content").length>0&&$("html, body").animate({scrollTop:$("div.top_content").offset().top},500),getGUID(),"ru"==location.host.substr(-2)&&"undefined"==typeof mobile&&(null!=navigator.appVersion.match(/chrome/i)&&null==navigator.appVersion.match(/OPR/i)||null!=navigator.userAgent.match(/firefox\/44/i))&&0==$("#notify_here").length)&&(void 0===(e=getCalcCookie("subscribed"))&&$.get("/include/check_subscription.php?"+Math.random(),function(e){if(e&&e.length>0){if("undefined"==typeof push_script_loaded){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="/js/push_subscription.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}$(e).insertBefore("div.top_content"),$("#notifies_subscription_info").slideDown(500)}else setCalcCookie("subscribed",1)}));suggest_q=$("#wh").val(),setInterval(checkSuggest,100),$(document).click(function(e){hideSuggest(),"undefined"==typeof mobile||$(e.target).hasClass("search")||$("div.block_search").slideUp()}),$("#wh").keydown(function(e){var t=[9,37,38,39,40,13,16,17,18,20],s=!0;for(var i in t)e.keyCode==t[i]&&(s=!1);s&&(suggest_sch=5,showSuggest()),38==e.keyCode?suggest_i?suggest_i--:Object.keys(arSuggest).length&&(suggest_i=Object.keys(arSuggest).length):40==e.keyCode&&(suggest_i<Object.keys(arSuggest).length?suggest_i++:suggest_i&&(suggest_i=1)),40==e.keyCode||38==e.keyCode?($("#"+sel+"_suggest a table").each(function(){$(this).find("td").css("background-color","#ffffff"),$(this).find("td.l").css("color","#000000"),$(this).find("td.r").css("color","silver")}),$("#sugg"+suggest_i).find("td").css("background-color","#6e99d4"),$("#sugg"+suggest_i).find("td").css("color","#ffffff"),suggest_q=$("#sugg"+suggest_i+" td.l").text(),$("#wh").val($("#sugg"+suggest_i+" td.l").text()),$("#wh").focus()):13==e.keyCode&&(window.location.href=suggest_i?$("#sugg"+suggest_i).parent().attr("href"):"/search.php?searchid=2220568&text="+encodeURI($("#wh").val())+"&web=0")}),$("#wh_btn").click(function(){window.location.href="/search.php?searchid=2220568&text="+encodeURI($("#wh").val())+"&web=0"});var e,t=!1,i=!1;$("div.breadcrumbs a.for_outbox").length>0?(t=$("div.breadcrumbs a.for_outbox").attr("href").substr(1),i=$("div.breadcrumbs a.for_outbox").text()):$("div.breadcrumbs a").length>0&&(t=$("div.breadcrumbs a").last().attr("href").substr(1),i=$("div.breadcrumbs a").last().text()),e=void 0!==(e=getCalcCookie("calctop"))?e.split("#"):[];var o=[];if(t&&i&&o.push(t+"="+i),e.length>0)for(var n in e)t=e[n],t!=o[0]&&o.length<12&&o.push(t);($("a.refresh").length>0&&$("a.refresh").data("t")&&$("a.refresh").html((new Date($("a.refresh").data("t")*1000)).toLocaleString()));if(o.length>0&&(setCalcCookie("calctop",o.join("#")),"undefined"==typeof mobile)){s="";for(var n in o)if(t=o[n],t=t.split("="),t.length>=3&&(t[0]+="="+t[1],t[1]=t[2]),s+='<a title="'+t[1]+'" href="/'+t[0]+'">'+t[1]+"</a> ",n>=1)break;$("div.last_calcs").prepend(s),$("div.last_calcs").removeClass("dn")}});